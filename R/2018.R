library(tibble)
library(readr)
library(lubridate)
library(here)

movies_db <- tribble(
  ~date_time, ~room, ~theatre,
  "2018-01-01 13:50", 3, "METROPOLE",
  "2018-01-12 19:15", 9, "LILLE",
  "2018-01-13 15:45", 6, "LILLE",
  "2018-01-13 17:50", 2, "LILLE",
  "2018-01-21 19:30", 4, "LILLE",
  "2018-01-21 13:15", 1, "LILLE",
  "2018-01-24 19:30", 7, "LILLE",
  "2018-01-26 20:20", 9, "LILLE",
  "2018-01-26 22:10", 5, "LILLE",
  "2018-01-27 13:30", 11, "LILLE",
  "2018-01-28 13:50", 6, "LILLE",
  "2018-01-30 18:05", 8, "LILLE",
  "2018-02-02 18:05", 8, "LILLE",
  "2018-02-03 16:00", 1, "LILLE",
  "2018-02-04 15:50", 12, "LILLE",
  "2018-02-08 19:15", 9, "LILLE",
  "2018-02-14 18:00", 9, "LILLE",
  "2018-02-18 13:45", 6, "LILLE",
  "2018-02-20 20:15", 11, "LILLE",
  "2018-02-21 19:00", 1, "LILLE",
  "2018-02-24 16:30", 9, "LILLE",
  "2018-02-25 14:00", 2, "MAJESTIC",
  "2018-03-01 18:05", 12, "LILLE",
  "2018-03-03 14:15", 13, "LILLE",
  "2018-03-03 16:30", 11, "LILLE",
  "2018-03-08 20:15", 6, "LILLE",
  "2018-03-15 13:30", 1, "LILLE",
  "2018-03-15 20:10", 11, "LILLE",
  "2018-03-16 14:00", 6, "LILLE",
  "2018-03-17 13:45", 3, "LILLE",
  "2018-03-22 20:05", 1, "LILLE",
  "2018-03-24 13:30", 9, "LILLE",
  "2018-03-24 15:30", 5, "LILLE",
  "2018-03-24 18:00", 6, "LILLE",
  "2018-03-28 20:30", 6, "LILLE",
  "2018-03-28 18:05", 12, "LILLE",
  "2018-03-31 13:55", 2, "LILLE",
  "2018-04-04 18:00", 6, "LILLE",
  "2018-04-05 19:00", 9, "LILLE",
  "2018-04-08 18:05", 3, "LILLE",
  "2018-04-12 21:00", 2, "LILLE",
  "2018-04-13 20:15", 11, "LILLE",
  "2018-04-15 13:55", 9, "LILLE",
  "2018-04-19 20:20", 4, "LILLE",
  "2018-04-21 16:00", 8, "LILLE",
  "2018-04-21 20:15", 6, "LILLE",
  "2018-04-23 19:25", 1, "MAJESTIC",
  "2018-04-25 13:50", 1, "LILLE",
  "2018-04-25 20:10", 3, "LILLE",
  "2018-04-27 16:30", 7, "LILLE",
  "2018-04-30 13:30", 5, "LILLE",
  "2018-05-01 13:50", 7, "LILLE",
  "2018-05-05 13:30", 3, "LILLE",
  "2018-05-09 19:45", 4, "LILLE",
  "2018-05-10 15:30", 11, "LILLE",
  "2018-05-10 18:50", 3, "MAJESTIC",
  "2018-05-11 13:35", 9, "LILLE",
  "2018-05-12 18:00", 1, "METROPOLE",
  "2018-05-14 18:40", 1, "MAJESTIC",
  "2018-05-05 15:50", 14, "LILLE",
  "2018-05-24 18:15", 5, "LILLE",
  "2018-05-27 16:30", 1, "LILLE",
  "2018-05-31 17:50", 4, "LILLE",
  "2018-06-01 20:15", 9, "LILLE",
  "2018-06-02 13:30", 13, "LILLE",
  "2018-06-03 13:15", 9, "LILLE",
  "2018-06-07 18:05", 12, "LILLE",
  "2018-06-12 19:30", 9, "LILLE",
  "2018-06-14 19:30", 7, "LILLE",
  "2018-06-16 15:30", 1, "LILLE",
  "2018-06-17 10:50", 12, "LILLE",
  "2018-06-19 19:40", 4, "LILLE",
  "2018-06-20 17:50", 1, "LILLE",
  "2018-06-20 20:05", 8, "LILLE",
  "2018-06-21 18:00", 12, "LILLE",
  "2018-06-27 19:30", 9, "LILLE",
  "2018-06-29 19:50", 6, "LILLE",
  "2018-07-06 21:00", 6, "LILLE",
  "2018-07-19 14:00", 1, "LILLE",
  "2018-07-19 16:45", 2, "MAJESTIC",
  "2018-07-21 16:00", 11, "LILLE",
  "2018-07-22 13:40", 7, "LILLE",
  "2018-07-23 13:40", 2, "MAJESTIC",
  "2018-07-23 20:20", 13, "LILLE",
  "2018-07-25 18:00", 11, "LILLE",
  "2018-07-25 22:15", 8, "LILLE",
  "2018-07-27 18:05", 10, "LILLE",
  "2018-08-01 20:15", 1, "LILLE",
  "2018-08-03 19:50", 4, "LILLE",
  "2018-08-06 20:00", 12, "LILLE",
  "2018-08-08 19:50", 3, "LILLE",
  "2018-08-12 16:15", 10, "LILLE",
  "2018-08-13 20:00", 9, "LILLE",
  "2018-08-14 18:40", 2, "MAJESTIC",
  "2018-08-15 13:25", 6, "LILLE",
  "2018-08-27 16:00", 9, "LILLE",
  "2018-08-27 19:30", 1, "LILLE",
  "2018-08-28 13:30", 6, "LILLE",
  "2018-08-28 16:00", 3, "MAJESTIC",
  "2018-08-29 13:55", 6, "LILLE",
  "2018-08-29 15:40", 8, "LILLE",
  "2018-09-01 15:45", 7, "LILLE",
  "2018-09-02 16:00", 3, "LILLE",
  "2018-09-03 13:50", 9, "LILLE",
  "2018-09-05 10:30", 7, "LILLE",
  "2018-09-06 16:00", 6, "LILLE",
  "2018-09-08 17:50", 8, "LILLE",
  "2018-09-15 13:45", 10, "LILLE",
  "2018-09-15 18:00", 1, "LILLE",
  "2018-09-19 19:30", 9, "LILLE",
  "2018-09-20 16:30", 1, "LILLE",
  "2018-09-20 20:05", 8, "LILLE",
  "2018-09-22 13:30", 7, "LILLE",
  "2018-09-23 13:50", 5, "MAJESTIC",
  "2018-09-26 13:40", 1, "LILLE",
  "2018-10-01 18:00", 5, "LILLE",
  "2018-10-04 16:30", 6, "LILLE",
  "2018-10-06 13:20", 12, "LILLE",
  "2018-10-07 13:40", 4, "LILLE",
  "2018-10-12 19:00", 8, "LILLE",
  "2018-10-13 13:55", 8, "LILLE",
  "2018-10-17 17:50", 8, "LILLE",
  "2018-10-18 19:05", 1, "LILLE",
  "2018-10-20 13:10", 10, "LILLE",
  "2018-10-26 19:30", 12, "LILLE",
  "2018-10-27 14:00", 2, "LILLE",
  "2018-10-27 16:00", 4, "LILLE",
  "2018-10-28 14:00", 1, "LILLE",
  "2018-10-28 18:00", 11, "LILLE",
  "2018-10-31 18:10", 2, "LILLE",
  "2018-10-31 20:55", 1, "MAJESTIC",
  "2018-11-01 17:15", 12, "LILLE",
  "2018-11-03 13:40", 11, "LILLE",
  "2018-11-07 18:00", 8, "LILLE",
  "2018-11-11 16:25", 12, "LILLE",
  "2018-11-14 18:00", 12, "LILLE",
  "2018-11-15 20:00", 3, "MAJESTIC",
  "2018-11-16 19:20", 1, "LILLE",
  "2018-11-17 14:05", 3, "LILLE",
  "2018-11-18 13:40", 7, "LILLE",
  "2018-11-23 15:50", 12, "LILLE",
  "2018-11-23 17:55", 11, "LILLE",
  "2018-11-25 14:00", 11, "LILLE",
  "2018-11-28 14:00", 12, "LILLE",
  "2018-11-28 20:10", 11, "LILLE",
  "2018-11-29 14:00", 1, "LILLE",
  "2018-11-30 19:30", 3, "LILLE",
  "2018-12-01 15:50", 4, "LILLE",
  "2018-12-06 20:05", 5, "LILLE",
  "2018-12-12 19:30", 8, "LILLE",
  "2018-12-18 20:00", 1, "LILLE",
  "2018-12-19 19:45", 4, "LILLE",
  "2018-12-28 18:40", 5, "MAJESTIC",
  "2018-12-29 13:40", 10, "LILLE",
  "2018-12-30 14:00", 5, "LILLE",
  "2018-12-03 20:10", 12, "LILLE"
)

write_csv(
  x = movies_db,
  path = here("data", unique(gsub("([0-9]{4})-.*", "\\1.csv", movies_db$date_time)))
)