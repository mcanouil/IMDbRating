library(tibble)
library(readr)
library(lubridate)
library(here)

movies_db <- tribble(
  ~date_time, ~room, ~theatre, ~imdb_id,
  "2020-01-02 17:45", 12, "LILLE", "tt5563334",
  "2020-01-04 14:00", 11, "LILLE", "tt9041586",
  "2020-01-08 19:50", 9, "LILLE", "tt5774060",
  "2020-01-12 13:40", 12, "LILLE", "tt10199590",
  "2020-01-14 20:10", 5, "VDA", "tt7998848",
  "2020-01-15 18:00", 11, "LILLE", "tt9031048",
  "2020-01-16 17:50", 12, "LILLE", "tt8572922",
  "2020-01-17 17:45", 10, "LILLE", "tt3612126",
  "2020-01-18 16:15", 6, "MAJESTIC", "tt0385887",
  "2020-01-21 20:30", 6, "LILLE", "tt8579674",
  "2020-01-26 15:30", 9, "LILLE", "tt6394270",
  "2020-01-30 17:05", 6, "LILLE", "tt7715270",
  "2020-01-31 18:00", 6, "LILLE", "tt9908390",
  "2020-02-01 13:30", 1, "LILLE", "tt2584384",
  "2020-02-02 13:30", 8, "LILLE", "tt6270534",
  "2020-02-02 15:15", 13, "LILLE", "tt8925540",
  "2020-02-08 13:15", 1, "LILLE", "tt7713068",
  "2020-02-09 15:40", 6, "MAJESTIC", "tt9828918",
  "2020-02-09 17:30", 3, "MAJESTIC", "tt6487174",
  "2020-02-09 19:30", 5, "LILLE", "tt1502397",
  "2020-02-14 17:55", 1, "LILLE", "tt8335482",
  "2020-02-15 15:25", 10, "LILLE", "tt0983946",
  "2020-02-15 20:00", 9, "LILLE", "tt3794354",
  "2020-02-16 13:40", 2, "LILLE", "tt4916630",
  "2020-02-18 18:00", 13, "LILLE", "tt6673612",
  "2020-02-20 18:00", 1, "LILLE", "tt10251538",
  "2020-02-22 11:00", 3, "LILLE", "tt8367814",
  "2020-02-22 15:50", 12, "LILLE", "tt10658928",
  "2020-02-23 13:45", 7, "LILLE", "tt3281548",
  "2020-02-25 17:35", 5, "MAJESTIC", "tt9845110",
  "2020-02-27 18:00", 1, "LILLE", "tt9568486",
  "2020-02-29 13:30", 1, "LILLE", "tt7504726",
  "2020-02-29 11:05", 2, "MAJESTIC", "tt9071322",
  "2020-03-02 19:20", 8, "LILLE", "tt3513548",
  "2020-03-03 19:25", 6, "LILLE", "tt1051906",
  "2020-03-05 18:20", 12, "LILLE", "tt7146812",
  "2020-03-08 17:55", 3, "LILLE", "tt9625632",
  "2020-03-10 19:45", 5, "LILLE", "tt9209312",
  "2020-03-14 16:30", 2, "LILLE", "tt10880402",
  "2020-06-28 16:30", 4, "LILLE", "tt10441958",
  "2020-06-28 19:00", 3, "MAJESTIC", "tt6017756",
  "2020-07-04 17:15", 8, "LILLE", "tt11748354",
  "2020-07-05 15:10", 4, "MAJESTIC", "tt6818118",
  "2020-07-07 18:40", 9, "LILLE", "tt9076562",
  "2020-07-09 19:30", 9, "LILLE", "tt10426916",
  "2020-07-10 18:30", 3, "LILLE", "tt9747594",
  "2020-07-10 20:20", 9, "LILLE", "tt3152592",
  "2020-07-11 16:30", 1, "MAJESTIC", "tt6828390",
  "2020-07-14 16:15", 5, "LILLE", "tt9308382",
  "2020-07-15 18:35", 9, "LILLE", "tt9303772",
  "2020-07-16 20:30", 14, "LILLE", "tt6562628",
  "2020-07-19 10:55", 10, "LILLE", "tt10369344"
)

write_csv(
  x = movies_db,
  path = here("data", unique(gsub("([0-9]{4})-.*", "\\1.csv", movies_db$date_time)))
)
