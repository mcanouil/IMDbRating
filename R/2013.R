library(tibble)
library(readr)
library(lubridate)
library(here)

movies_db <- tribble(
  ~date_time, ~room, ~theatre, ~imdb_id,
  "2013-03-20 20:20", 11, "LILLE", "tt1588173",
  "2013-04-03 20:20", 8, "LILLE", "tt1583421",
  "2013-04-09 20:20", 9, "LILLE", "tt2053463",
  "2013-04-14 19:45", 1, "LILLE", "tt1483013",
  "2013-04-15 20:00", 3, "LILLE", "tt2244901",
  "2013-04-18 16:30", 11, "LILLE", "tt1462900",
  "2013-04-23 20:10", 4, "LILLE", "tt0481499",
  "2013-04-23 22:00", 6, "LILLE", "tt2276778",
  "2013-04-26 18:10", 4, "LILLE", "tt2354181",
  "2013-05-03 18:10", 8, "LILLE", "tt2855342",
  "2013-05-13 19:45", 4, "LILLE", "tt1381404",
  "2013-05-19 19:35", 13, "LILLE", "tt1300854",
  "2013-05-23 20:20", 9, "LILLE", "tt1602613",
  "2013-05-23 22:15", 7, "LILLE", "tt1047011",
  "2013-05-24 18:05", 6, "LILLE", "tt0848537",
  "2013-05-24 20:15", 14, "LILLE", "tt1924429",
  "2013-05-24 22:10", 2, "LILLE", "tt1931435",
  "2013-05-26 16:30", 4, "LILLE", "tt1905041",
  "2013-05-26 19:15", 3, "LILLE", "tt1343092",
  "2013-06-02 20:15", 12, "LILLE", "tt0848537",
  "2013-06-03 20:15", 4, "LILLE", "tt1911644",
  "2013-06-03 22:05", 9, "LILLE", "tt1951261",
  "2013-06-04 19:30", 12, "LILLE", "tt2404461",
  "2013-06-14 20:00", 13, "LILLE", "tt1815862",
  "2013-06-14 22:15", 2, "LILLE", "tt2602664",
  "2013-06-20 16:45", 8, "LILLE", "tt1408101",
  "2013-06-20 19:15", 6, "LILLE", "tt0770828",
  "2013-06-20 22:15", 3, "LILLE", "tt2132285",
  "2013-06-23 19:15", 6, "LILLE", "tt0770828",
  "2013-07-09 19:55", 9, "LILLE", "tt1690953",
  "2013-07-09 22:15", 13, "LILLE", "tt1821641",
  "2013-07-15 18:00", 6, "LILLE", "tt2320274",
  "2013-07-15 20:20", 8, "LILLE", "tt1453405",
  "2013-07-18 13:50", 10, "LILLE", "tt1872102",
  "2013-07-18 15:50", 7, "LILLE", "tt1872101",
  "2013-07-18 19:40", 1, "LILLE", "tt1663662",
  "2013-07-18 22:10", 3, "LILLE", "tt0816711",
  "2013-07-28 13:50", 6, "LILLE", "tt1430132",
  "2013-07-30 19:40", 12, "LILLE", "tt0816711",
  "2013-08-12 13:50", 7, "LILLE", "tt0790736",
  "2013-08-12 15:45", 6, "LILLE", "tt1670345",
  "2013-08-12 17:55", 10, "LILLE", "tt2184339",
  "2013-08-13 10:45", 9, "LILLE", "tt1210819",
  "2013-08-13 13:40", 12, "LILLE", "tt2017020",
  "2013-08-15 20:10", 1, "LILLE", "tt1854564",
  "2013-08-16 11:00", 9, "LILLE", "tt1535108",
  "2013-08-25 17:55", 4, "LILLE", "tt1457767",
  "2013-09-02 19:55", 14, "LILLE", "tt1535108",
  "2013-09-12 17:55", 13, "LILLE", "tt1650554",
  "2013-09-18 19:50", 6, "LILLE", "tt1291580",
  "2013-09-23 19:30", 9, "LILLE", "tt1327773",
  "2013-09-27 19:45", 8, "LILLE", "tt1979320",
  "2013-09-27 22:10", 9, "LILLE", "tt3013258",
  "2013-09-28 13:30", 4, "LILLE", "tt1272878",
  "2013-09-29 18:05", 6, "LILLE", "tt2364841",
  "2013-09-29 19:45", 10, "LILLE", "tt1411250",
  "2013-10-01 21:30", 1, "MAJESTIC", "tt2334873",
  "2013-10-24 18:15", 13, "LILLE", "tt2207072",
  "2013-10-24 20:15", 1, "LILLE", "tt1454468",
  "2013-10-24 22:05", 2, "LILLE", "tt1981107",
  "2013-10-26 19:30", 14, "LILLE", "tt1538403",
  "2013-10-27 18:15", 6, "MAJESTIC", "tt1392214",
  "2013-11-05 19:30", 12, "LILLE", "tt1706620",
  "2013-11-07 18:05", 10, "LILLE", "tt1981115",
  "2013-11-07 20:15", 4, "LILLE", "tt1731141",
  "2013-11-08 11:00", 12, "LILLE", "tt2194499",
  "2013-11-01 20:00", 1, "LILLE", "tt2193215",
  "2013-11-17 22:00", 12, "LILLE", "tt2873250",
  "2013-11-25 19:30", 6, "LILLE", "tt1535109",
  "2013-11-27 22:20", 11, "LILLE", "tt2231630",
  "2013-11-28 20:15", 9, "LILLE", "tt1951264",
  "2013-11-30 10:55", 12, "LILLE", "tt1951181",
  "2013-12-01 20:15", 5, "LILLE", "tt1240899",
  "2013-12-03 20:00", 8, "LILLE", "tt3146360",
  "2013-12-04 22:20", 8, "LILLE", "tt2294629",
  "2013-12-07 10:55", 11, "LILLE", "tt2249221",
  "2013-12-13 17:00", 6, "LILLE", "tt1170358",
  "2013-12-13 20:05", 5, "LILLE", "tt1204975",
  "2013-12-13 22:15", 3, "LILLE", "tt2319018",
  "2013-12-23 14:10", 13, "LYON PART-DIEU", "tt2294629",
  "2013-12-26 22:15", 4, "LILLE", "tt2668134",
  "2013-12-27 17:50", 3, "LILLE", "tt0993846"
)

write_csv(
  x = movies_db,
  path = here("data", unique(gsub("([0-9]{4})-.*", "\\1.csv", movies_db$date_time)))
)
